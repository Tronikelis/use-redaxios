"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react/jsx-runtime"),t=require("react"),r=require("redaxios"),a=require("merge-anything"),o=require("dequal"),s=require("use-custom-compare"),u=require("tiny-lru"),i=require("fast-json-stable-stringify");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=n(r),c=n(u),d=n(i);const p={axios:l.default.defaults},v=t.createContext({options:p});const y=({...e})=>((e,t=0)=>{let r=3735928559^t,a=1103547991^t;for(let t,o=0;o<e.length;o++)t=e.charCodeAt(o),r=Math.imul(r^t,2654435761),a=Math.imul(a^t,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(a^a>>>13,3266489909),a=Math.imul(a^a>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),4294967296*(2097151&a)+(r>>>0)})(d.default({...e})).toString(),f=c.default(500,36e5);exports.RedaxiosProvider=function({options:t,children:r}){return e.jsx(v.Provider,Object.assign({value:{options:t}},{children:r}),void 0)},exports.useRedaxios=function(e,r={},u){const{options:i}=t.useContext(v),[n,c]=t.useState(f.get(y({url:e,relativeUrl:"",type:"get",options:r,deps:u}))),[d,p]=t.useState(!!u),[h,g]=t.useState(!!u),[m,x]=t.useState(void 0),q=async(t,s,n)=>{var d;g(!0);const v=f.get(y({url:e,relativeUrl:s,type:t,body:n,options:r,deps:u}));v?(c(v),p(!1)):p(!0);const h=a.merge(i,r);h.axios=await(e=>{var t;return(null===(t=h.interceptors)||void 0===t?void 0:t.request)?h.interceptors.request(e):e})(null!==(d=h.axios)&&void 0!==d?d:{});const[m,q]=await async function(e){try{return[await e,!1]}catch(e){return[e,!0]}}(l.default({url:e+s,method:t,data:n,...h.axios}));return q?(x(m),b=m,h.onError&&h.onError(b),g(!1),void p(!1)):(m.data=await(e=>{var t;return(null===(t=h.interceptors)||void 0===t?void 0:t.response)?h.interceptors.response(e):e})(m.data),o.dequal(m.data,v)||(f.set(y({url:e,relativeUrl:s,type:t,body:n,options:r,deps:u}),m.data),c(m.data)),x(void 0),(e=>{h.onSuccess&&h.onSuccess(e)})(m.data),g(!1),p(!1),m.data);var b};s.useCustomCompareEffect((()=>{Array.isArray(u)&&q("get","")}),[...null!=u?u:[]],o.dequal);const b=t.useCallback((async(e="")=>q("get",e)),[e]),C=t.useCallback((async(e="",t)=>q("post",e,t)),[e]),M=t.useCallback((async(e="")=>q("delete",e)),[e]),S=t.useCallback((async(e="",t)=>q("put",e,t)),[e]),j=t.useCallback((async(e="",t)=>q("patch",e,t)),[e]);return{data:n,error:m,fetching:h,loading:d,get:b,post:C,del:M,put:S,patch:j}};
