"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react/jsx-runtime"),t=require("react"),r=require("redaxios"),a=require("merge-anything"),s=require("dequal"),o=require("fast-json-stable-stringify"),i=require("tiny-lru");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=n(r),l=n(o),c=n(i);const d={axios:u.default.defaults},p=t.createContext({options:d});const v=({...e})=>((e,t=0)=>{let r=3735928559^t,a=1103547991^t;for(let t,s=0;s<e.length;s++)t=e.charCodeAt(s),r=Math.imul(r^t,2654435761),a=Math.imul(a^t,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(a^a>>>13,3266489909),a=Math.imul(a^a>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),4294967296*(2097151&a)+(r>>>0)})(l.default({...e})).toString(),f=c.default(500,36e5);exports.RedaxiosProvider=function({options:t,children:r}){return e.jsx(p.Provider,Object.assign({value:{options:t}},{children:r}),void 0)},exports.useRedaxios=function(e,r={},o){const{options:i}=t.useContext(p),[n,c]=t.useState(f.get(v({url:e,relativeUrl:"",type:"get",options:r,deps:o}))),[d,y]=t.useState(!!o),[h,g]=t.useState(!!o),[x,b]=t.useState(void 0),q=async(t,n,l)=>{var d;g(!0);const p=f.get(v({url:e,relativeUrl:n,type:t,body:l,options:r,deps:o}));p?(c(p),y(!1)):y(!0);const h=a.merge(i,r);h.axios=await(e=>{var t;return(null===(t=h.interceptors)||void 0===t?void 0:t.request)?h.interceptors.request(e):e})(null!==(d=h.axios)&&void 0!==d?d:{});const[x,q]=await async function(e){try{return[await e,!1]}catch(e){return[e,!0]}}(u.default({url:e+n,method:t,data:l,...h.axios}));return q?(b(x),m=x,h.onError&&h.onError(m),g(!1),void y(!1)):(x.data=await(e=>{var t;return(null===(t=h.interceptors)||void 0===t?void 0:t.response)?h.interceptors.response(e):e})(x.data),s.dequal(x.data,p)||(f.set(v({url:e,relativeUrl:n,type:t,body:l,options:r,deps:o}),x.data),c(x.data)),b(void 0),(e=>{h.onSuccess&&h.onSuccess(e)})(x.data),g(!1),y(!1),x.data);var m};t.useEffect((()=>{Array.isArray(o)&&q("get","")}),[l.default(o)]);const m=t.useCallback((async(e="")=>q("get",e)),[e]),C=t.useCallback((async(e="",t)=>q("post",e,t)),[e]),M=t.useCallback((async(e="")=>q("delete",e)),[e]),S=t.useCallback((async(e="",t)=>q("put",e,t)),[e]),j=t.useCallback((async(e="",t)=>q("patch",e,t)),[e]);return{data:n,error:x,fetching:h,loading:d,get:m,post:C,del:M,put:S,patch:j}};
